<!DOCTYPE html>
<html lang="uk">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, orientation=portrait">
<link rel="manifest" href="manifest.json">
<meta name="mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-capable" content="yes">

 
    <script id="popupScript" src="index.js" defer disabled></script>
</head>
 
 
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Студентський</title>
  
</head>

<style>
 :root{
      --bg: #f7f8f9;
      --card: #fff;
      --muted: #9aa0a6;
      --accent: #489520;
      --radius: 12px;
      --gap: 12px;
      --container-pad: 12px;
      --max-width: 920px; /* для планшетов/десктопа */
    }

    html,body{
      overflow: hidden;
      height:100%;
       margin:0;
        background:#fff; 
        font-family:-apple-system,
         "Segoe UI", Roboto, "Helvetica Neue", Arial; color:#111;}
    /* Учитываем вырезы / индикатор (iPhone и др) */
    .shell{padding: env(safe-area-inset-top) var(--container-pad) calc(env(safe-area-inset-bottom) + 84px) var(--container-pad); max-width:var(--max-width); margin:0 auto;}




    /* Шапка */
    .header{
      display:flex; align-items:center; gap:12px;
      padding:14px 4px; background:transparent;
      position:sticky; top:0; z-index:10;
      backdrop-filter: blur(6px);
    }
    .gray {
  filter: grayscale(100%);
}
    .back{font-size:20px; width:36px; height:36px; display:flex; align-items:center; justify-content:center; border-radius:10px; cursor:pointer; color:#222;}
    .title{font-weight:600; font-size:18px; flex:1; text-align:center; margin-right:36px;}
.back img {
  width: 25px;
  height: 25px;
  object-fit: contain;
}



    /* Вкладки */
    .tabs{
      display:flex; 
       
      background:#ebebeb;
      border-radius:999px;
    padding:3px 3px 3px 1px;
    }
    .tab{
      flex:1; text-align:center; padding:10px 8px; border-radius:999px; color:#1b1b1b; font-weight:600; cursor:pointer;
      user-select:none; font-size:15px;
    }
    .tab.active{ background:var(--card); color:#489520; box-shadow:0 1px 4px rgba(0,0,0,0.06); border-bottom:10px 10px #1b1b1b; }

    /* Список карточек */
    .list{ padding:10px 0 0; display:flex; flex-direction:column; gap:14px; }

    .card{
      display:flex; align-items:center; gap:12px;
      background:var(--card); border-radius:var(--radius); padding:14px;
      box-shadow: 0 2px 12px rgba(0,0,0,0.25);
    }

    .logo{ 
      flex:0 0 52px; height:52px; border-radius:7px; overflow:hidden; display:flex; align-items:center; justify-content:center;
      box-shadow:0 0px 8px rgba(0,0,0,0.3); background:#fff;
    }
    .logo img{ width:44px; height:44px; object-fit:contain; display:block; }

    .card-main{ letter-spacing: 0.4px; padding: 10px;  flex:1; min-width:0; } /* min-width чтобы текст переносился корректно */
    .city{ font-weight:700; font-size:16px; color:#111; line-height:1; }
    .company.active{ margin-top:2px; font-size:14px; color: #111; }
    .company.inactive{ color: #9aa0a6; }
    .meta{ margin-top:8px; font-size:14px; color:#333; display:flex; flex-direction:column; gap:6px; }
    .meta .dates{ color:#666; font-size:14px; }
    .meta .status{ font-size:14px; }
  

    .status.active{ color:#111; display:flex; align-items:center; gap:8px; }
    .status.inactive{ color:var(--muted);}

    /* Иконки справа (transport) */
    .icons{
      display:flex; flex-direction:column; gap:8px; align-items:center; justify-content:flex-start;
      flex:0 0 36px; color: #bfc6cb;
    }
    .icons svg{ width:22px; height:22px; opacity:0.9; }

    /* Фиксированная кнопка снизу */
    .bottom-bar{
      position:fixed; left:0; right:0; bottom:0; z-index:40;
      padding: calc(env(safe-area-inset-bottom) + 12px) var(--container-pad) 12px;
      
      
     
    }
    .btn{
      width:100%; max-width:980px; margin:0 auto; display:block;
      background:var(--accent); color:#fff; border:none; font-weight:700;
      font-size:16px; padding:14px; border-radius:12px; cursor:pointer;
      box-shadow: 0 6px 14px rgba(76,175,80,0.18);
    }

    /* Responsive tweaks */
    @media(min-width:720px){
      .shell{ padding-left:18px; padding-right:18px; }
      .card{ padding:16px; gap:16px; }
      .logo{ width:64px; height:64px; }
      .icons{ flex:0 0 44px; }
    }

    /*index.css*/
  
.bg-img {
 background-color: #000;
  position: fixed;
  top: 0; left: 0;
  width: 100%;
  height: 100%;
  object-fit: fill; /* растягивает полностью, без полос и без сохранения пропорций */
  z-index: -1;
  bottom: 0;
}


  .ticket-title {
    margin-top: 60px;
    font-size: 1.5rem;
     
    font-weight: 300;
    color: #fff;
    margin-bottom: 12px;
     width: 87%;
    text-align: left;
  }
  .ticket-card {
    display: flex;
  flex-direction: column;
  align-items: center; /* выравнивание всех дочерних по центру */
    background: #fff;
    border-radius: 16px;
    width: 91%;
    
    box-shadow: 0 2px 12px rgba(0,0,0,0.25);
  padding: 0px;
     margin: 2px 0; 

    
  }
  .ticket-logo {
    margin-bottom: 10px;
    margin-top: 20px;
    display: flex;
    
    align-items: center; /* выровнять по центру по вертикали */
    max-width: 140px;         /* ширина блока, чтобы смотрелось красиво */
   
   justify-content: center; 
     box-shadow: 0 2px 12px rgba(0,0,0,0.25);
    border-radius: 10px;
    
    
  }
  .ticket-logo img {
    display: flex;
    margin: 10px 15px;
    width: 120px;
    height: 120px;
    
    
   
  }
  .ticket-meta {
    text-align: center;
    margin-bottom: 10px;
  }
  .ticket-meta div {
    font-size: 15px;
    margin: 2px 0;
  }
  
  .progress {
    height: 5px;
    background: #e0e0e0;
    
    overflow: hidden;
    margin: 0px 0;
  }
  .progress-bar {
    height: 100%;
    transition: width 0.5s linear;
  }
  .row {
    display: flex;
    justify-content: space-between;
    margin: 10px 0;
    margin: 15px 0 10px 0;
  }
  .time {
    font-size: 20px;
    font-weight: 500;
    color: #4da723;
    margin-right: 15px;
  }
  .date {
    font-size: 20px;
    font-weight: 500;
    color: #000;
    margin-left: 15px;
  }
  .price {
    text-align: center;
    font-size: 20px;
    font-weight: 600;
    margin: 15px 0 13px 0;
  }
  .sub {
    text-align: center;
    font-size: 14px;
    color: #696969;
    margin: 0px 0 2px 0;
  }
  #range {
  font-size: 17px;
    color: #171717;
}
  .days {
    text-align: center;
    font-size: 14px;
    color: #444;
    margin-top: 4px;
    margin-bottom: 15px;
  }
  .line-time{
    background: #f4f3f3;
    width: 100%;
    padding-bottom: 5px;
  }

  .ticket-main-full{
    margin: 0;
    
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh; /* изменили с 95vh на 100vh */
    height: 100%; /* добавили полную высоту */
    box-sizing: border-box;
    flex-direction: column;
  }
.close-btn {
  position: absolute;
  top: 5%;
  left: 5%;
  width: 25px;
  height: 25px;
  cursor: pointer;
   z-index: 1001;
  background: transparent;
  border: none;
  padding: 0;
}
  




</style>


<body>
  <div class="shell">
    <div class="header">
      <div class="back" onclick="history.back()"><img src="налево.png" alt="Закрыть" class=""></div>
      <div class="title">Архів</div>
    </div>

    <div class="tabs">
      <div class="tab" id="tab-ticket" onclick="switchTab('ticket')">Квиток</div>
      <div class="tab active" id="tab-pass" onclick="switchTab('pass')">Проїзний</div>
    </div>

    <div id="content-area" style="margin-top:10px;">
      <div id="cards" class="list"></div>
    </div>
  </div>

  <!-- нижняя фиксированная панель -->
  <div class="bottom-bar">
    <button class="btn" onclick="scanQR()">Відсканувати QR-код</button>
  </div>

<script>
     document.addEventListener('DOMContentLoaded', function() {
    // Явно устанавливаем стили при загрузке
    const mainStyles = document.getElementById('mainStyles');
    const popupStyles = document.getElementById('popupStyles');
    
    if(mainStyles) mainStyles.disabled = false;
    if(popupStyles) popupStyles.disabled = true;
    
    // ... остальной код
});
  // Пример данных — можешь подгружать с сервера
  const tickets = [
    {
      city: "Одеса",
      company: "Одесміськелектротранс",
      start: "2025-09-02",
      end:   "2025-09-30",
      logo: "./Odesa.svg",
      icon: "metr-td.png",
      grayscale: false // локально прикреплено (замени на URL если нужно)
    },
    {
      city: "Одеса",
      company: "Одесміськелектротранс",
      start: "2023-09-01",
      end:   "2023-09-07",
      logo: "./Odesa-grey.png",
      icon: "metr-td-off.png",
      grayscale: true
    },
    {
      city: "Дніпро",
      company: "КП Дніпровський електротранспорт ДМР",
      start: "2023-07-11",
      end:   "2023-07-11",
      logo: "./Dnipro-grey.png",
      icon: "metr-td-off.png",
      grayscale: true
    }
  ];

  // Функция форматирования даты
  function formatDateISO(iso){
    const d = new Date(iso);
    if (isNaN(d)) return iso;
    return d.toLocaleDateString('uk-UA', {day:'2-digit', month:'2-digit', year:'numeric'});
  }

  // Рендер карточек
  function renderCards(list){
    const container = document.getElementById('cards');
    container.innerHTML = '';
    const now = new Date();

    list.forEach(item => {
      const start = new Date(item.start);
      const end   = new Date(item.end);
      const isActive = now >= start && now <= end;

      const card = document.createElement('div');
      card.className = 'card';

      // Структура карточки
      card.innerHTML = `
  <div class="logo"><img src="${item.logo}" alt="${item.city}" onerror="this.style.opacity=0.6; this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=48 height=48><rect width=48 height=48 fill=%23f0f0f0 /></svg>'"></div>
  <div class="card-main">
    <div class="meta">
    <div class="dates" style="color: #9aa0a6;">${item.city}</div>
    <div class="company ${isActive ? 'active' : 'inactive'}">${item.company}</div>
    
      <div class="dates"> 
        <span style="color: #9aa0a6;">Строк дії</span><br>
</div>
      <div class="status ${isActive ? 'active' : 'inactive'}">${formatDateISO(item.start)} - ${formatDateISO(item.end)}</div>

        
      
      <div class="dates">
        <span style="color: #9aa0a6;">Дійсний</span><br>
        
      </div>
      <div class="status ${isActive ? 'active' : 'inactive'}">${isActive ? ('' + now.toLocaleString('uk-UA')) : 'Ні'}</div>
    </div>
  </div>
  <div class="icons">
    <img 
  src="${item.icon}" 
  alt="транспорт" 
  class="${!isActive ? 'gray' : ''}" 
  style="width:30px; height:100px;"
  onerror="this.classList.add('gray');">
  </div>
`;

      container.appendChild(card);
    });
  }

  // Инициализация
  renderCards(tickets);

  // Простые заглушки для вкладок/кнопки
  function switchTab(tab){
    document.getElementById('tab-ticket').classList.toggle('active', tab === 'ticket');
    document.getElementById('tab-pass').classList.toggle('active', tab === 'pass');
    // можно менять данные при переключении
    //renderCards(tab === 'ticket' ? tickets.filter(...) : tickets)
  }

  function scanQR(){
    alert('Запустить сканер QR (заглушка) — сюда подключаем нативный/браузерный сканер.');
  }




 
</script>


<div id="popup" class="ticket-popup" style="display: none; position: fixed; bottom: 0; left: 0; width: 100%; height: 100%; background: #000; z-index: 1000; transition: transform 0.3s ease-in-out; transform: translateY(100%);">
   <img src="fon.png" class="bg-img">
   <img src="close.png" alt="Закрыть" class="close-btn" style="cursor: pointer; z-index: 1001;">
    <div class="ticket-main-full">
  <div class="ticket-title">Студентський (тролейбус місячний)</div>

  <div class="ticket-card">
    <div class="ticket-logo">
      <img src="https://upload.wikimedia.org/wikipedia/commons/4/49/Coat_of_Arms_of_Odesa.svg" alt="Одеса герб">
    </div>
    <div class="ticket-meta">
      <div>тролейбус</div>
      <div>Одеса</div>
      <div>Серія <b id="series"></b></div>
    </div>

    
  <img src="./tramvay.gif" 
     alt="Трамвай"
  style=" 
    margin-top: 3px; /* увеличьте значение по необходимости */
    width: 100%;
    margin-bottom: 3px;
    object-fit: cover;          /* убирает полосы */
    object-position: center;    /* центрирование */
    display: block;
    background: transparent;
    
  ">
  


    <div class="line-time">
    <div class="progress"><div class="progress-bar" id="progress"></div></div>
    <div class="row">
        <div class="date" id="date">--.--</div>
      <div class="time" id="time">--:--:--</div>
      
    </div></div>
    <div class="price">240.0 UAH</div>
    <div class="sub">Строк дії</div>
    <div class="sub" id="range">02.09.2025 - 30.09.2025</div>
    <div class="days" id="daysLeft">До закінчення строку дії залишилося «--» днів</div>
  </div>
</div>
</div>

<script>

document.addEventListener('DOMContentLoaded', function() {
    // Рендер карточек
    renderCards(tickets);
    
    // Открытие popup
    document.getElementById('cards').addEventListener('click', function() {
        const popup = document.getElementById('popup');
        popup.style.display = 'block';
        
        // Анимация появления
        setTimeout(() => {
            popup.style.transform = 'translateY(0)';
            if(window.initPopup) window.initPopup();
        }, 10);
    });

    // Закрытие popup
    document.querySelector('.close-btn').addEventListener('click', function(e) {
        e.preventDefault();
        const popup = document.getElementById('popup');
        
        // Анимация скрытия
        popup.style.transform = 'translateY(100%)';
        
        // Скрываем popup после завершения анимации
        setTimeout(() => {
            popup.style.display = 'none';
        }, 300);
    });
});
</script>

</body>
</html>

